package {{ .Name }}

//
// The main task.
//
// Note: the autogenerated code contains a very basic task
// that does nothing. You should, of course, edit it!
//

import (
	"context"

	"github.com/ooni/probe-cli/v3/internal/model"
)

// MainTask is the main task.
type MainTask struct {
	// IDGenerator is the TaskIDGenerator to use.
	IDGenerator *TaskIDGenerator

	// Logger is the logger to use.
	Logger model.Logger

	// TODO: add fields.
	//
	// Please, keep in mind that, with multiple tasks you should
	// most like only share fields as read-only here!
}

// NewMainTask creates a new MainTask instance.
//
// TODO: add the required parameters.
func NewMainTask(idGenerator *TaskIDGenerator, logger model.Logger) *MainTask {
	return &MainTask{
		IDGenerator: idGenerator,
		Logger:      logger,
		// TODO: fill fields.
	}
}

// Run implements Task
func (t *MainTask) Run(ctx context.Context, sched TaskScheduler) error {
	t.Logger.Infof("Hello, world")
	return nil
}

// Repr implements Task
func (t *MainTask) Repr() string {
	return "{{ .Name }}Task"
}
